@page
@model LeasingModel
@{
    ViewData["Title"] = "Лизингов калкулатор";
}

<div class="container">
    <h2 style="font-family: 'Merriweather', serif; color: #1a3a5a; margin-top: 20px;">Лизингов калкулатор</h2>
    <p style="color: #666; margin-bottom: 20px;">Изчислете реалното оскъпяване (ГПР) при покупка на стоки на изплащане.</p>

    <form method="post" class="calculator-form">
        <div class="grid">
            <div class="field-group">
                <label>Цена на стоката с ДДС (лв):</label>
                <input asp-for="Price" type="number" step="0.01" min="0" required />
            </div>

            <div class="field-group">
                <label>Срок на лизинга (месеци):</label>
                <input asp-for="Months" type="number" min="1" required />
            </div>

            <div class="field-group">
                <label>Първоначална вноска (лв):</label>
                <input asp-for="DownPayment" type="number" step="0.01" min="0" required />
            </div>

            <div class="field-group">
                <label>Месечна вноска (лв):</label>
                <input asp-for="MonthlyPaymentInput" type="number" step="0.01" min="0" required />
            </div>

            <div class="field-group">
                <label>Първоначална такса:</label>
                <div style="display: flex; gap: 5px;">
                    <input id="FeeValue" name="FeeValue" type="number" step="0.01" min="0"
                           value="@Model.FeeValue" style="flex-grow: 1;" />
                    <select id="FeeType" name="FeeType" style="width: 70px;">
                        <option value="percent">%</option>
                        <option value="fixed">лв</option>
                    </select>
                </div>
            </div>
        </div>

        <div style="text-align: right; margin-top: 30px;">
            <button type="submit">ИЗЧИСЛИ ГПР</button>
        </div>
    </form>

@if (Model.ShowResults)
{
        <div class="result-card">
            <h3 style="color:#1a3a5a; margin-top:0;">Финансов анализ</h3>
            <div style="display: flex; justify-content: space-between; border-bottom: 1px solid #eee; padding: 10px 0;">
                <span>Годишен процентен разход (ГПР):</span>
                <strong style="color: #006096; font-size: 1.2rem;">@Model.APR.ToString("F2") %</strong>
            </div>
            <div style="display: flex; justify-content: space-between; border-bottom: 1px solid #eee; padding: 10px 0;">
                <span>Общо изплатено (с такси):</span>
                <strong>@Model.TotalPaid.ToString("F2") лв.</strong>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 10px 0;">
                <span>Обща сума на таксите:</span>
                <strong>@Model.TotalFees.ToString("F2") лв.</strong>
            </div>
        </div>
}

    <div style="margin-top: 60px; padding-bottom: 100px;">
        <h2 style="font-family: 'Merriweather', serif; color: #1a3a5a; border-bottom: 2px solid #1a3a5a; padding-bottom: 10px;">Информация за лизинга</h2>

        <div class="info-box">
            <h4 style="color: #1a3a5a; margin-top: 0;">Какво представлява лизинговият калкулатор?</h4>
            <p>
                Този калкулатор е предназначен за потребители, които купуват техника, мебели или други стоки на изплащане. Често търговците обявяват "0% лихва", но добавят месечни такси или големи първоначални комисионни.
            </p>
            <p>
