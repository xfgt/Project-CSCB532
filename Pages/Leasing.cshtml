@page
@model LeasingModel
@{
    ViewData["Title"] = "Лизингов калкулатор";
}

<h2>Лизингов калкулатор</h2>

    <form method="post">
        <label>Цена на стоката с ДДС:</label>
        <input asp-for="Price" type="number" step="0.01" required />

        <label>Срок на лизинга (месеци):</label>
        <input asp-for="Months" type="number" required />

        <div style="margin-bottom: 10px;">
        <label for="FeeValue">Първоначална такса за обработка:</label><br />

        <div style="display: flex; align-items: center; gap: 5px;">
            <input id="FeeValue" name="FeeValue" type="number" step="0.01" min="0"
                value="@Model.FeeValue"
                style="width: 150px; text-align: right; padding: 5px;" />

            <select id="FeeType" name="FeeType" style="width: 65px; padding: 5px; text-align: center;">
                <option value="percent" selected>%</option>
                <option value="fixed">лв</option>
            </select>
        </div>
    </div>


    <label>Първоначална вноска:</label>
    <input asp-for="DownPayment" type="number" step="0.01" required />

    <label>Месечна вноска:</label>
    <input asp-for="MonthlyPaymentInput" type="number" step="0.01" required />

    <button type="submit">Изчисли</button>
</form>
@section Scripts {
    <script>
        document.getElementById('FeeType').addEventListener('change', function () {
            const input = document.getElementById('FeeValue');
            if (this.value === 'percent') {
                input.placeholder = 'Процент';
            } else {
                input.placeholder = 'Лева';
            }
        });
    </script>
}

@if (Model.ShowResults)
{
    <h3>Резултати:</h3>
    <p>Годишен процентен разход: @Model.APR.ToString("F2") %</p>
    <p>Общо изплатено с такси: @Model.TotalPaid.ToString("F2") лв.</p>
    <p>Общи такси: @Model.TotalFees.ToString("F2") лв.</p>
}